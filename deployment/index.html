<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/godwoken-review/blog/rss.xml" title="Godwoken Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/godwoken-review/blog/atom.xml" title="Godwoken Documentation Blog Atom Feed"><title data-react-helmet="true">Deployment | Godwoken Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deployment | Godwoken Documentation"><meta data-react-helmet="true" name="description" content="Deploy a Godwoken Network by Using Godwoken-Kicker"><meta data-react-helmet="true" property="og:description" content="Deploy a Godwoken Network by Using Godwoken-Kicker"><meta data-react-helmet="true" property="og:url" content="https://github.com/xying21/godwoken-review/deployment"><link data-react-helmet="true" rel="shortcut icon" href="/godwoken-review/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://github.com/xying21/godwoken-review/deployment"><link rel="stylesheet" href="/godwoken-review/styles.8d735850.css">
<link rel="preload" href="/godwoken-review/styles.043f250e.js" as="script">
<link rel="preload" href="/godwoken-review/runtime~main.193383c4.js" as="script">
<link rel="preload" href="/godwoken-review/main.92a7df47.js" as="script">
<link rel="preload" href="/godwoken-review/1.6fb82fe3.js" as="script">
<link rel="preload" href="/godwoken-review/2.c6e89289.js" as="script">
<link rel="preload" href="/godwoken-review/33.7c89fd10.js" as="script">
<link rel="preload" href="/godwoken-review/34.7a103aa9.js" as="script">
<link rel="preload" href="/godwoken-review/f976f453.7d7abd83.js" as="script">
<link rel="preload" href="/godwoken-review/17896441.9bf4a9ae.js" as="script">
<link rel="preload" href="/godwoken-review/a819b516.72c3e664.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/godwoken-review/img/favicon.png" alt="Nervos" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/godwoken-review/img/favicon.png" alt="Nervos" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nervosnetwork/godwoken" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a href="https://discord.gg/Rk62Qmnpfg" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discord</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/godwoken-review/img/favicon.png" alt="Nervos" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/godwoken-review/img/favicon.png" alt="Nervos" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/nervosnetwork/godwoken" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://discord.gg/Rk62Qmnpfg" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy sidebarWithHideableNavbar_CROi"><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_xFc8"><img src="/godwoken-review/img/favicon.png" alt="Nervos" class="themedImage_YANc themedImage--light_3CMI"><img src="/godwoken-review/img/favicon.png" alt="Nervos" class="themedImage_YANc themedImage--dark_3ARp"><strong></strong></a><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/godwoken-review/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/godwoken-review/decentralizationRoadmap">Decentralization Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/godwoken-review/comparisonEVM">Comparison with EVM</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/godwoken-review/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/godwoken-review/deployEthDapp">Deploy Ethereum DApps to Godwoken</a></li><li class="menu__list-item"><a class="menu__link" href="/godwoken-review/deposit_withdrawal">Deposit &amp; Withdraw CKB on Godwoken</a></li><li class="menu__list-item"><a class="menu__link" href="/godwoken-review/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Deployment</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="deploy-a-godwoken-network-by-using-godwoken-kicker"></a>Deploy a Godwoken Network by Using Godwoken-Kicker<a class="hash-link" href="#deploy-a-godwoken-network-by-using-godwoken-kicker" title="Direct link to heading">#</a></h2><p>Godwoken-kicker is a one-line command to start a Godwoken network on <strong>Devnet</strong>. This deployment method helps developers deploy Ethereum contracts and quickly migrate Ethereum DApps to CKB Devnet in testing and development environments.</p><ul><li>RPC URL: http://localhost:8024</li><li>Chain ID: 1024777</li></ul><p>Godwoken-kicker provides a quick mode and a custom mode for deployment.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1shy tabs__item--active">Quick Mode</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Custom Mode</li></ul><div class="margin-vert--md"><div role="tabpanel"><p>The quick mode is fast and simple. It executes the builds of all components from pre-built docker images.</p><b>Environment</b><p></p><ul><li>Ubuntu 20.04 LTS</li></ul><p></p><b>Prerequisites</b><p></p><ul><li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Docker Engine</a></li><li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose</a></li></ul><p></p><p><b>Steps</b></p><ol><li><p>Clone the source of Godwoken-kicker.</p><p>If it is already cloned, skip to the next step.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/RetricSu/godwoken-kicker.git</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Initialize Godwoken-kicker.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Stop any running Godwoken network by using the <code>make stop</code> command before initializing Godwoken-kicker. </p></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> godwoken-kicker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The <code>make init</code> command can be used in the following situations:</p><ul><li>It is the first time to start the Godwoken network.</li><li>The deployment mode is changed.</li><li>The CKB chain data and all layer 1 related cache data are deleted.</li></ul></li><li><p>Start the Godwoken network.</p><p>The <code>make start</code> command can be used to start the deployed Godwoken network. The <code>make start-f</code> command can be used to force deploy and start a new Godwoken network.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> start</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>  Do note that after running the <code>make clean</code> command, run <code>make init</code> again if a reboot is desired. </p></div></div><details><summary>Output</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building ckb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building polyjuice</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building call-polyman</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building godwoken</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building web3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_postgres_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_ckb_1      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_polyjuice_1    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_call-polyman_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_indexer_1      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_godwoken_1     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_web3_1         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Run commands to monitor background activities: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> sg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Godwoken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> sp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Polyjuice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> web3 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> call-polyman </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">setup </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">All Jobs Done       </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">########################################] 100%</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Great</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"> Checkout http://localhost:6100 to deploy contract</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details></li><li><p>Set up an Ethereum wallet.</p><p>In this example, a MetaMask (an Ethereum Wallet) wallet is set up for the deployment. Add the MetaMask extension in the browser (Firefox, Google Chrome, Brave or Microsoft Edge) and create an account for the wallet.</p><p>If there is a MetaMask wallet ready to be used, skip to the next step directly.</p></li><li><p>After the Godwoken network has been successfully launched, visit the website <a>http://localhost:6100</a> and connect the MetaMask wallet by clicking the <b>Connect Wallet</b> button.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  RPC URL=http://localhost:8024</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CHAIN ID=1024777</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Deploy an ETH contract to the Godwoken network.</p><ol><li><p>Prepare and compile an ETH contract.</p></li><li>Deposit 400 CKB to the ETH wallet on the <b>ACCOUNTS</b> page of the Godwoken network.</li><li>Deploy the ETH contract that you have compiled on the <b>CONTRACT</b> page of the Godwoken network.</li></ol></li></ol></div><div role="tabpanel" hidden=""><p>The custom mode is more flexible for custom requirements. It can build the components from local packages and executes the builds locally.</p><b>Environment</b><p></p><ul><li>Ubuntu 20.04 LTS</li></ul><p></p><b>Prerequisites</b><p></p><ul><li><a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Docker Engine</a></li><li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose</a></li><li><a href="https://github.com/nervosnetwork/molecule" target="_blank" rel="noopener noreferrer">Moleculec</a></li><li>Rustup nightly</li></ul><p></p><p><b>Steps</b></p><ol><li><p>Clone the source of Godwoken-kicker.</p><p>If it is already cloned, skip to the next step directly.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/RetricSu/godwoken-kicker.git</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Set the mode with <code>true</code> under the <code>[mode]</code> section in the <code>/docker/.build.mode.env</code> file for the components that you want to build from local packages.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-title=&quot;/docker/.build.mode.env&quot; codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">####[mode]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MANUAL_BUILD_GODWOKEN=false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MANUAL_BUILD_WEB3=false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MANUAL_BUILD_SCRIPTS=false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MANUAL_BUILD_POLYJUICE=false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>(Optional) Configure component version under the <code>[packages]</code> section in the <code>docker/.build.mode.env</code> file.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-title=&quot;/docker/.build.mode.env&quot; codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">####[packages]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">GODWOKEN_GIT_URL=https://github.com/nervosnetwork/godwoken.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">GODWOKEN_GIT_CHECKOUT=master</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">POLYMAN_GIT_URL=https://github.com/RetricSu/godwoken-polyman.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">POLYMAN_GIT_CHECKOUT=master</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">WEB3_GIT_URL=https://github.com/nervosnetwork/godwoken-web3.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">WEB3_GIT_CHECKOUT=main</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Initialize Godwoken-kicker.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Stop any running Godwoken network by using the <code>make stop</code> command before initializing Godwoken-kicker.</p></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> godwoken-kicker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The <code>make init</code> command can be used in the following situations:</p><ul><li>The first time to start the Godwoken network.</li><li>The deployment mode is changed.</li><li>The CKB chain data and all layer 1 related cache data are deleted.</li></ul></li><li><p>Start the Godwoken network.</p><p>The <code>make start</code> command can be used to start the deployed Godwoken network. The <code>make start-f</code> command can be used to force deploy and start a new Godwoken network.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> start</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><details><summary>Output</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building ckb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building polyjuice</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building call-polyman</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building godwoken</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Building web3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_postgres_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_ckb_1      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_polyjuice_1    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_call-polyman_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_indexer_1      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_godwoken_1     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting docker_web3_1         </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Run commands to monitor background activities: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> sg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Godwoken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> sp </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Polyjuice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> web3 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">web3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> call-polyman </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">setup </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">All Jobs Done       </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">########################################] 100%</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Great</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"> Checkout http://localhost:6100 to deploy contract</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details></li><li><p>Set up an Ethereum wallet.</p><p>In this example, a MetaMask (an Ethereum Wallet) wallet is set up for the deployment. Add the MetaMask extension in the browser (Firefox, Google Chrome, Brave or Microsoft Edge) and create an account for the wallet.</p><p>If there is a MetaMask wallet ready to be used, skip this and go to the next step directly.</p></li><li><p>After the Godwoken network has been successfully launched, visit the website <a>http://localhost:6100</a> and connect the MetaMask wallet by clicking the <b>Connect Wallet</b> button.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  RPC URL=http://localhost:8024</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CHAIN ID=1024777</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Deploy an ETH contract to the Godwoken network.</p><ol><li><p>Prepare and compile an ETH contract.</p></li><li><p>Deposit 400 CKB to the ETH wallet on the <b>ACCOUNTS</b> page of the Godwoken network.</p></li><li><p>Deploy the ETH contract that you have compiled on the <b>CONTRACT</b> page of the Godwoken network.</p></li></ol></li></ol></div></div></div><p>For more information about the Godwoken-kicker commands, see <a href="https://github.com/RetricSu/godwoken-kicker" target="_blank" rel="noopener noreferrer">godwoken-kicker</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="deploy-a-godwoken-network-manually"></a>Deploy a Godwoken Network Manually<a class="hash-link" href="#deploy-a-godwoken-network-manually" title="Direct link to heading">#</a></h2><p>This deployment method is useful in situations such as deploying a Godwoken network on <b>Testnet</b> or <b>Mainnet</b>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="environment"></a>Environment<a class="hash-link" href="#environment" title="Direct link to heading">#</a></h3><ul><li>OS: Ubuntu 20.04</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h3><p>The following tools need to be installed before entering the deployment process:</p><ul><li><p>Node.js (&gt;=12.0.0)</p></li><li><p>Yarn (version 1.22.5 or above)</p></li><li><p>GCC and make</p><p>To install <code>GCC</code> and <code>make</code> on Ubuntu 20.04, run the following command as root or user with sudo privileges:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> update</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> build-essential</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p><a href="https://github.com/nervosnetwork/capsule/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">Capsule v0.7.0</a></p></li><li><p>Docker</p><p><strong>Docker</strong> must be installed for building and deploying Godwoken. For more information about Docker installation, see <a href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener noreferrer">Install Docker Engine on Ubuntu</a>.</p><p>To manage Docker as a non-root user, see the Docker documentation of <a href="https://docs.docker.com/engine/install/linux-postinstall/" target="_blank" rel="noopener noreferrer">Manage Docker as a non-root user</a>.</p></li></ul><ul><li>ckb-cli: The ckb-cli tool is used for deploying smart contracts. It can be installed from a <a href="https://github.com/nervosnetwork/ckb/releases" target="_blank" rel="noopener noreferrer">CKB pre-built installer package</a>. The verified ckb-cli version in this documentation is <a href="https://github.com/nervosnetwork/ckb/releases/tag/v0.42.0" target="_blank" rel="noopener noreferrer">v0.42.0</a>.</li></ul><ul><li><p>Rustc v1.54.0</p></li><li><p>llvm and clang</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install libclang-dev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>OpenSSL library</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt-get install pkg-config libssl-dev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p><a href="https://github.com/nervosnetwork/molecule" target="_blank" rel="noopener noreferrer">Moleculec v0.7.2</a></p><p>To install Moleculec:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cargo </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> moleculec --locked --version </span><span class="token number" style="color:rgb(247, 140, 108)">0.7</span><span class="token plain">.2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p><a href="https://github.com/nervosnetwork/tippy/releases" target="_blank" rel="noopener noreferrer">Tippy</a></p><p>Tippy is a tool to help set up and manage CKB nodes. For more information, see <a href="https://cryptape.github.io/lumos-doc/docs/reference/ckbnode#install-a-ckb-node-by-using-tippy" target="_blank" rel="noopener noreferrer">Install a CKB Node by Using Tippy</a>. The verified Tippy version in this documentation is <a href="https://github.com/nervosnetwork/tippy/releases/tag/v0.4.0-rc2" target="_blank" rel="noopener noreferrer">v0.4.0-rc2</a>.</p></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The current user must have permissions to run ckb-cli, Capsule, Moleculec and docker. If the execution of these tools requires sudo commands, that may cause issues during the deployment process.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="steps"></a>Steps<a class="hash-link" href="#steps" title="Direct link to heading">#</a></h3><ol><li><p>Create a CKB account for the deployment.</p><p>The account must have enough CKB capacity for the deployment.  For more information about CKB accounts and creating CKB accounts, see <a href="https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount" target="_blank" rel="noopener noreferrer">CKB Accounts and Capacity</a>.</p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">address:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mainnet: ckb1qyqpadsep7yruydz5eaulty4xwc2sn6smhashalnjx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  testnet: ckt1qyqpadsep7yruydz5eaulty4xwc2sn6smhas2cpv76</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lock_arg: 0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lock_hash: 0x499aa230ded32812a246778bc718f4d61a47497c1b7352211d241d2ad333ed75</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pk: 0xca02cc4b8e0e447e243204dd2e16a1692026bfdd4add502b203975999d3a6909</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The account information in this documentation is only used for demonstration. Do <strong>not</strong> use these private keys, addresses and args elsewhere.</p></div></div></li><li><p>Start the CKB node and the CKB miner.</p><ol><li><p>Launch the Tippy dashboard.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> tippy-linux-x64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ./Tippy</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Launch a CKB devnet if you haven&#x27;t set up any chain yet and specify the miner with the account prepared for the deployment.</p></li><li><p>Start the chain and the CKB miner on the Tippy dashboard.</p></li></ol></li><li><p>Clone the Godwoken source.</p><p>Open a new terminal window and run the following command to clone the Godwoken source:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone --recursive https://github.com/nervosnetwork/godwoken</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Deploy an SUDT script to the chain.</p><p>For mor information, see <a href="https://docs.nervos.org/docs/labs/sudtbycapsule#introduction" target="_blank" rel="noopener noreferrer">Nervos CKB Docs: Write an SUDT script by Capsule</a>.</p><p>Deploy plan  output example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ capsule deploy --address ckt1qyqpadsep7yruydz5eaulty4xwc2sn6smhas2cpv76 --fee </span><span class="token number" style="color:rgb(247, 140, 108)">0.0002</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deployment plan:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">migrated_capacity: </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">new_occupied_capacity: </span><span class="token number" style="color:rgb(247, 140, 108)">17390.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">txs_fee_capacity: </span><span class="token number" style="color:rgb(247, 140, 108)">0.0002</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total_occupied_capacity: </span><span class="token number" style="color:rgb(247, 140, 108)">17390.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">recipe:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  cells:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - name: my-sudt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      index: </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      tx_hash: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x07de15f8afbd4b55e5d11248f4cd9f5195c8d96f171af04e7f727042bb0643c6&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      occupied_capacity: </span><span class="token number" style="color:rgb(247, 140, 108)">17390.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      data_hash: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xfe2a574febac93ef4da8e716403be072e4703da736676107d68a5e31b682943f&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type_id: </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x5318897f71a58ca55b6325736b8170d92c49096719db7646427709a890a9eea0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dep_groups: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Confirm deployment? </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Yes/No</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Password: </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> Sending tx 07de15f8afbd4b55e5d11248f4cd9f5195c8d96f171af04e7f727042bb0643c6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Deployment complete</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <code>tx_hash</code> and <code>data_hash</code> will be used in the next step to configure the <code>setup-config.json</code> file.</p></div></div></li><li><p>Prepare the following files under the <code>/godwoken/deploy</code> folder.</p><ul><li><p><code>pk</code>: The file stores the private key that is used to deploy Godwoken.</p><p> Example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-title=&quot;/godwoken/deploy/pk&quot; codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">0xca02cc4b8e0e447e243204dd2e16a1692026bfdd4add502b203975999d3a6909</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p><code>scripts-build.json</code>: The file specifies the pre-built docker image of Godwoken and the repositories of the other components like godwoken_scripts, godwoken_polyjuice and clerkb.</p><p> Example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">```json title=&quot;/godwoken/deploy/scripts-build.json&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;prebuild_image&quot;: &quot;nervos/godwoken-prebuilds:v0.6.9-rc1&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;repos&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;godwoken_scripts&quot;: &quot;https://github.com/nervosnetwork/godwoken-scripts#master&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;godwoken_polyjuice&quot;: &quot;https://github.com/nervosnetwork/godwoken-polyjuice#main&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;clerkb&quot;: &quot;https://github.com/nervosnetwork/clerkb#v0.4.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">```</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p> For more information about the tags of the <code>prebuild_image</code>, see <a href="https://hub.docker.com/r/nervos/godwoken-prebuilds/tags?page=1&amp;ordering=last_updated" target="_blank" rel="noopener noreferrer">nervos/godwoken-prebuilds</a>.</p></li><li><p><code>setup-config.json</code>: The file provides configurations for the Rollup.</p><ul><li><p><code>l1_sudt_script_type_hash</code>: The <code>data_hash</code> of the deployed SUDT script.</p></li><li><p><code>tx_hash</code> (under <code>l1_sudt_cell_dep</code>): The <code>tx_hash</code> of the deployed SUDT script.</p></li><li><p><code>cells_lock</code>: <code>cells_lock</code> is used to unlock/upgrade Rollup scripts. </p></li><li><p><code>reward_lock</code>: <code>reward_lock</code> is used to receive challenge rewards. </p></li><li><p><code>burn_lock</code>: <code>burn_lock</code> is used to receive burned assets that can be unlocked.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The file must be configured with correct SUDT script to deposit SUDT successfully.</p></div></div><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_2eSY">/godwoken/deploy/setup-config.json</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;l1_sudt_script_type_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xfe2a574febac93ef4da8e716403be072e4703da736676107d68a5e31b682943f&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;l1_sudt_cell_dep&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;dep_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;code&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;out_point&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;tx_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x07de15f8afbd4b55e5d11248f4cd9f5195c8d96f171af04e7f727042bb0643c6&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;index&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;node_initial_ckb&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1200000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;cells_lock&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;code_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;hash_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;args&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;reward_lock&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;code_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;hash_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;args&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;burn_lock&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;code_hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;hash_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;data&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;args&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul></li></ul></li></ol><ol start="6"><li><p>Set up Godwoken nodes.</p><p>To set up Godwoken nodes:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> godwoken</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RUST_LOG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">info cargo +nightly run --bin gw-tools setup -n </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> -k deploy/pk --network devnet --scripts-build-config deploy/build-scripts.json -c deploy/setup-config.json</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This setup command compiles Godwoken scripts, deploys the scripts and layer 2 genesis blocks, and generates configuration files for the Godwoken nodes.  </p><p>The deployment requires approximately 10 minutes to complete depending on network connection.</p><p>Output Example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2021-11-19T06:22:47Z INFO  gw_tools::deploy_genesis] tx_hash: 0x4ec4532a4b8c7d799ef30d36df413f1e4aa05402336a3df53b4f9afa5baf52cd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[2021-11-19T06:22:47Z INFO  gw_tools::utils::transaction] waiting tx 4ec4532a4b8c7d799ef30d36df413f1e4aa05402336a3df53b4f9afa5baf52cd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[2021-11-19T06:22:52Z INFO  gw_tools::utils::transaction] tx proposed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[2021-11-19T06:22:57Z INFO  gw_tools::utils::transaction] tx commited</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[2021-11-19T06:22:57Z INFO  gw_tools::setup] Finish</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Configure the receiver lock.</p><p>After the setup command is completed, a <code>config.toml</code> file is generated under <code>/godwoken/output/node1</code> and <code>/godwoken/output/node2</code>, and a <code>scripts-deploy-result.json</code> file is generated under <code>/godwoken/output</code>.</p><ol><li><p>Download the <a href="https://github.com/classicalliu/lumos-config-generator/releases/download/v0.1.1/lumos-config-generator-linux-amd64" target="_blank" rel="noopener noreferrer">config generator</a> tool and generate the <code>config.json</code> file for the CKB chain.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The CKB node must be running when executing the generator to generate the config file.</p></div></div><p>To generate the <code>config.json</code> file in the project root directory:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ./lumos-config-generator-linux-amd64 config.json http://127.0.0.1:8114</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Assign a receiver lock in the node&#x27;s <code>config.toml</code> file. </p><p>The code_hash of the receiver lock is the CODE_HASH of the SECP256K1_BLAKE160 script from the <code>config.json</code> file.</p><p>The args is the lock args of the deployment cells owner.</p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_2eSY">config.toml</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-toml codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[block_producer.challenger_config.rewards_receiver_lock]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">code_hash = &#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hash_type = &#x27;type&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">args = &#x27;0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ol></li><li><p>Start the Godwoken nodes.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The default node mode is <code>fullnode</code>. It can be modified in <code>config.toml</code> to either <code>readonly</code> mode or <code>test</code> mode.</p><p>If the two nodes need to be started within the same environment, manually modify the listening port number in the <code>config.toml</code> file for each node.</p></div></div><p>Run the following command to start node1:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RUST_LOG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">info cargo +nightly run --bin godwoken run -c output/node1/config.toml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If an error about the use of unstable library feature is encountered during the process, try the following commands to fix the issue:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cargo </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> cargo-edit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cargo upgrade --workspace num-bigint</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Set up Polyjuice.</p><p>Clone the source of godwoken-examples. For more information, see <a href="https://github.com/nervosnetwork/godwoken-examples" target="_blank" rel="noopener noreferrer">godwoken-examples</a>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone --recursive https://github.com/nervosnetwork/godwoken-examples</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Then, create an account on Polyjuice. It will take some time to build index for the first time. </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> godwoken-examples</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> run build-all</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># export SCRIPT_DEPLOY_RESULT_PATH=&lt;Path to scripts-deploy-result.json&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SCRIPT_DEPLOY_RESULT_PATH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">~/godwoken/deploy/scripts-deploy-result.json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># export GODWOKEN_CONFIG_PATH=&lt;Path to godwoken config.toml&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GODWOKEN_CONFIG_PATH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">~/godwoken/deploy/node1/config.toml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> run copy-configs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># LUMOS_CONFIG_FILE=&lt;Path to config.json&gt; node ./packages/tools/lib/account-cli.js deposit -c 40000000000 -p &lt;privkey&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">LUMOS_CONFIG_FILE</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">~/config.json node ./packages/tools/lib/account-cli.js deposit -c </span><span class="token number" style="color:rgb(247, 140, 108)">40000000000</span><span class="token plain"> -p 0xca02cc4b8e0e447e243204dd2e16a1692026bfdd4add502b203975999d3a6909</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>For more information about generating the Lumos config file for DEV chain, see <a href="https://cryptape.github.io/lumos-doc/docs/guides/config#step-1-generate-the-configjson-file-for-the-dev-chain" target="_blank" rel="noopener noreferrer">Generate the config.json file for the DEV chain</a>.</p></li><li><p>Start the web3 server.</p><ol><li><p>Create a PostgreSQL instance.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker run --name postgres -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">POSTGRES_USER</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">user -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">POSTGRES_DB</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">godwoken -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">POSTGRES_PASSWORD</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">mypassword -d -p </span><span class="token number" style="color:rgb(247, 140, 108)">5432</span><span class="token plain">:5432 postgres</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Clone the source of <a href="https://github.com/nervosnetwork/godwoken-web3" target="_blank" rel="noopener noreferrer">godwoken-web3</a>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/nervosnetwork/godwoken-web3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Prepare the <code>.env</code> file under <code>/godwoken-web3/packages/api-server</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> godwoken-web3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">cat</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> ./packages/api-server/.env </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token string" style="color:rgb(195, 232, 141)">EOF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">DATABASE_URL=postgres://user:mypassword@postgres:5432/godwoken</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">GODWOKEN_JSON_RPC=http://godwoken:8119</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">ETH_ACCOUNT_LOCK_HASH=&lt;Eth Account Lock Code Hash&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">ROLLUP_TYPE_HASH=&lt;Rollup Type Hash&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">PORT=8024</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">CHAIN_ID=1024777</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">CREATOR_ACCOUNT_ID=3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">DEFAULT_FROM_ADDRESS=0x1eb6190f883e11a2a67bcfac9533b0a84f50ddfb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">POLYJUICE_VALIDATOR_TYPE_HASH=&lt;Polyjuice Validator Code Hash&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">L2_SUDT_VALIDATOR_SCRIPT_TYPE_HASH=&lt;L2 Sudt Validator Code Hash&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">TRON_ACCOUNT_LOCK_HASH=&lt;Tron Account Lock Code Hash&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">EOF</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>Start the web3 server.</p><p>To start the web3 server properly, make sure to clear the postgres database, and then run the migration SQL file to recreate the tables before running the server:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> run migrate:latest</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> run build:godwoken</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> run start</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ol></li></ol></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/godwoken-review/comparisonEVM"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Comparison with EVM</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/godwoken-review/deployEthDapp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploy Ethereum DApps to Godwoken »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deploy-a-godwoken-network-by-using-godwoken-kicker" class="table-of-contents__link">Deploy a Godwoken Network by Using Godwoken-Kicker</a></li><li><a href="#deploy-a-godwoken-network-manually" class="table-of-contents__link">Deploy a Godwoken Network Manually</a><ul><li><a href="#environment" class="table-of-contents__link">Environment</a></li><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#steps" class="table-of-contents__link">Steps</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Nervos Foundation. All Rights Reserved.</div></div></div></footer></div>
<script src="/godwoken-review/styles.043f250e.js"></script>
<script src="/godwoken-review/runtime~main.193383c4.js"></script>
<script src="/godwoken-review/main.92a7df47.js"></script>
<script src="/godwoken-review/1.6fb82fe3.js"></script>
<script src="/godwoken-review/2.c6e89289.js"></script>
<script src="/godwoken-review/33.7c89fd10.js"></script>
<script src="/godwoken-review/34.7a103aa9.js"></script>
<script src="/godwoken-review/f976f453.7d7abd83.js"></script>
<script src="/godwoken-review/17896441.9bf4a9ae.js"></script>
<script src="/godwoken-review/a819b516.72c3e664.js"></script>
</body>
</html>